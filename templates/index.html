<!DOCTYPE html>
<html>
<head>
    <title>Control de Gastos</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 0 auto; padding: 20px; }
        .form { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        .expenses { margin-top: 20px; }
        .expense { padding: 10px; border-bottom: 1px solid #eee; }
        .total { font-weight: bold; margin-top: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; }
        .logout { text-decoration: none; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Control de Gastos</h1>
        <div>
            <span>Hola, {{ username }}</span>
            <a href="/api/logout" class="logout">Cerrar sesión</a>
        </div>
    </div>
    
    <div class="form">
        <h2>Añadir Gasto</h2>
        <input type="text" id="description" placeholder="Descripción">
        <input type="number" id="amount" step="0.01" placeholder="Cantidad">
        <button onclick="addExpense()">Añadir</button>
    </div>

    <div class="expenses">
        <h2>Lista de Gastos</h2>
        {% for expense in expenses %}
        <div class="expense">
            {{ expense.description }} - {{ expense.amount }}€
        </div>
        {% endfor %}
    </div>

    <div class="total">
        Total: {{ total }}€
    </div>

    <script>
        async function addExpense() {
            const description = document.getElementById('description').value;
            const amount = document.getElementById('amount').value;
            
            await fetch('/add_expense', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ description, amount })
            });
            
            location.reload();
        }
    </script>
</body>
</html> 